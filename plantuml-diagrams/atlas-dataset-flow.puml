@startuml atlas-dataset-flow

skinparam monochrome true
skinparam handwritten false
skinparam shadowing false
skinparam defaultFontName Arial
skinparam sequenceMessageAlign center
skinparam linetype polyline

title Dataset Management Flow

actor Admin
actor User
participant "Atlas Frontend" as Frontend
participant "Atlas API" as API
participant "AWS S3" as S3
participant "MongoDB" as MongoDB
participant "Dataset Registry" as Registry

note over Admin, Registry: Dataset Upload and Management

Admin -> Frontend: Navigate to dataset management
Admin -> Frontend: Upload dataset files
activate Frontend
Frontend -> Frontend: Validate dataset format
Frontend -> API: POST /api/v1/datasets
activate API
API -> API: Validate dataset metadata
API -> S3: Upload dataset files
S3 --> API: Confirm upload
API -> MongoDB: Store dataset metadata
MongoDB --> API: Confirm storage
API -> Registry: Register dataset in registry
Registry --> API: Confirm registration
API --> Frontend: Return success
deactivate API
Frontend --> Admin: Show success message
deactivate Frontend

User -> Frontend: Browse available datasets
activate Frontend
Frontend -> API: GET /api/v1/datasets
activate API
API -> MongoDB: Fetch dataset metadata
MongoDB --> API: Return datasets
API --> Frontend: Return dataset list
deactivate API
Frontend --> User: Display dataset gallery
deactivate Frontend

User -> Frontend: View dataset details
activate Frontend
Frontend -> API: GET /api/v1/datasets/{id}
activate API
API -> MongoDB: Fetch dataset metadata
MongoDB --> API: Return dataset
API -> S3: Get dataset sample
S3 --> API: Return sample data
API --> Frontend: Return combined data
deactivate API
Frontend --> User: Display dataset details
deactivate Frontend
@enduml