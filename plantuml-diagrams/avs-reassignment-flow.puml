@startuml
' Use handwritten style with improved fonts and spacing
skinparam backgroundColor white
skinparam handwritten true
skinparam defaultTextAlignment center

' Fix arrow styling
skinparam ArrowColor black
skinparam ArrowThickness 1.5
skinparam SequenceArrowThickness 1.5

' Improve fonts for better readability
skinparam ParticipantFontSize 16
skinparam ParticipantFontStyle bold
skinparam ActorFontSize 16
skinparam ActorFontStyle bold
skinparam NoteFontSize 14
skinparam TitleFontSize 20
skinparam TitleFontStyle bold

' Color participants for better visualization
skinparam ActorBackgroundColor lightblue
skinparam ParticipantBackgroundColor lightyellow
skinparam NoteBackgroundColor lightgray
skinparam DatabaseBackgroundColor lightgreen

title Task Reassignment Flow

actor Admin
participant "EvalAvsTaskManager" as TaskManager
participant "OriginalOperator" as OriginalOperator
participant "NewOperator" as NewOperator
participant "GoEvaluator" as GoEvaluator

note over Admin, GoEvaluator: Task Reassignment Process

Admin -> TaskManager: reassignTask(taskId)
activate TaskManager
TaskManager -> TaskManager: Check if task is expired
TaskManager -> TaskManager: Get next operator from queue
TaskManager -> TaskManager: Update task with new operator
TaskManager -> TaskManager: Emit EvalReassigned Event
deactivate TaskManager

TaskManager --> OriginalOperator: EvalReassigned Event
OriginalOperator -> OriginalOperator: Cancel task processing

TaskManager --> NewOperator: EvalReassigned Event
activate NewOperator
NewOperator -> NewOperator: Check if new assigned operator
NewOperator -> GoEvaluator: Start evaluation process
note right of NewOperator: Process follows normal evaluation flow
deactivate NewOperator
@enduml