@startuml
skinparam sequenceMessageAlign center
skinparam backgroundColor white
skinparam handwritten false

title Task Reassignment Flow

actor Admin
participant "EvalAvsTaskManager" as TaskManager
participant "OriginalOperator" as OriginalOperator
participant "NewOperator" as NewOperator
participant "GoEvaluator" as GoEvaluator

note over Admin, GoEvaluator: Task Reassignment Process

Admin -> TaskManager: reassignTask(taskId)
activate TaskManager
TaskManager -> TaskManager: Check if task is expired
TaskManager -> TaskManager: Get next operator from queue
TaskManager -> TaskManager: Update task with new operator
TaskManager -> TaskManager: Emit EvalReassigned Event
deactivate TaskManager

TaskManager --> OriginalOperator: EvalReassigned Event
OriginalOperator -> OriginalOperator: Cancel task processing

TaskManager --> NewOperator: EvalReassigned Event
activate NewOperator
NewOperator -> NewOperator: Check if new assigned operator
NewOperator -> GoEvaluator: Start evaluation process
note right of NewOperator: Process follows normal evaluation flow
deactivate NewOperator
@enduml